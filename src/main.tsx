import { createRoot } from 'react-dom/client'
import App from './App.tsx'
import './index.css'

createRoot(document.getElementById("root")!).render(<App />);

// Lightweight scroll-reveal for elements with .reveal
const setupScrollReveal = () => {
  if (typeof window === 'undefined') return;
  const elements = Array.from(document.querySelectorAll('.reveal')) as HTMLElement[];
  if (elements.length === 0) return;

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          (entry.target as HTMLElement).classList.add('reveal--visible');
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.12, rootMargin: '0px 0px -40px 0px' }
  );

  elements.forEach((el) => observer.observe(el));
};

// Delay until first paint
window.requestAnimationFrame(() => setupScrollReveal());
